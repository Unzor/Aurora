<body><h1> Bundle Node.js scripts with Browserify! </h1> <div></div><textarea id="code-input" placeholder="Your JavaScript code to bundle..." style="margin: 0px; width: 671px; height: 471px;"></textarea>
<textarea style="margin: 0px; width: 671px; height: 471px;" id="code-output" placeholder="Result here..."></textarea>
<textarea style="margin: 0px; width: 671px; height: 371px;" id="eval-output" placeholder="Evaluated code here..."></textarea> 
<button id="bundle-btn" onclick="createBundle()"> Bundle your code! </button>  <div></div>  <div></div>
<script>
  console.stdlog = console.log.bind(console);
console.logs = [];
console.log = function(){
 document.querySelector('#eval-output').value=Array.from(arguments);
    console.stdlog.apply(console, arguments);
}

console.error = function(){
 document.querySelector('#eval-output').value=Array.from(arguments);
    console.stdlog.apply(console, arguments);
}

console.warn = function(){
 document.querySelector('#eval-output').value=Array.from(arguments);
    console.stdlog.apply(console, arguments);
}

function millisToMinutesAndSeconds(millis) {
  var minutes = Math.floor(millis / 60000);
  var seconds = ((millis % 60000) / 1000).toFixed(0);
  return minutes + ":" + (seconds < 10 ? '0' : '') + seconds;
}

  function createBundle(){
    var start_time = new Date().getTime();
       document.querySelector('#bundle-btn').disabled=true;
    var eval_bundle;
 var request = new XMLHttpRequest();
      request.open("POST", "/bundle");

      request.setRequestHeader('Content-type', 'application/json');


      request.send(JSON.stringify({
code: document.querySelector('#code-input').value
      }));

      request.onreadystatechange = function() { if (request.response.replace(/\s/g, '').length) {
        var request_time = new Date().getTime() - start_time;
         document.querySelector('#code-output').value=request.response;
       window.eval_bundle=function(){
        eval(request.response);
        };
   window.eval_bundle();
   document.querySelector('#bundle-btn').disabled=false;
    document.querySelector('#eval-output').value +='\n \n ---------------------------------- \n' + 'Building took ' + millisToMinutesAndSeconds(request_time) + " seconds to load \n ----------------------------------";
};}
}
</script></body>
